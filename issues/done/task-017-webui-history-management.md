# 017: Task - WebUI 履歴管理パネルの実装

## 概要
CLIの `/history` 機能と同等の履歴保存/一覧/読み込み/新規開始をWebUIに追加する。ユーザーID入力と注意喚起を行い、未保存破棄や上書き時は確認を挟む。システムプロンプトとトークン表示も連動させる。

## 仕様書
- [WebUI 履歴管理機能 仕様書](../doc/webui_history_management_spec.md)

## 受け入れ基準 (Acceptance Criteria)
- ユーザーID未入力時は履歴操作と送信が非活性になっている。
- 履歴パネルで保存・一覧・読み込み・新規開始が行え、各操作成功時に状態メッセージが表示される。
- 未保存セッション破棄や同名保存時にモーダル風の確認（Yes/Noボタン）を行い、Noなら処理が中断される。
- 読込/新規開始でチャット履歴とシステムプロンプトがリセット・置換され、トークン表示とSendボタン状態が更新される。
- 既存 `HistoryStore` のファイルスキーマを使用し、サニタイズとI/OエラーハンドリングがWebUI側でも適用される。
- ユニットテストが追加され、すべてのテストがパスする。

## タスク分割 (Sub-tasks)
1. **UI構築**: `webui.py` にユーザーID入力と履歴パネル（保存名入力、一覧ドロップダウン、保存/読み込み/新規ボタン）を追加し、操作結果の表示領域を用意する。
2. **確認フロー実装**: 未保存破棄や上書き・読込置換時にモーダル風テキスト＋Yes/Noボタンで確認を求めるロジックを追加する。
3. **機能連携**: `HistoryStore` とサニタイズを再利用し、保存・読込・新規開始処理でチャット履歴とシステムプロンプトを適切に更新する。操作後にトークン表示/送信可否も更新する。
4. **テスト**: `test_webui.py` に活性制御・確認分岐・保存/読込/新規の動作を検証するテストを追加し、全テストをパスさせる。
5. **ドキュメント更新**: `README.md` など必要なドキュメントにWebUIでの履歴操作手順を追記する。
