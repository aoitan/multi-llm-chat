# Epic: Multi-LLM CLIツールの開発

## 概要
GeminiとChatGPTの2つのLLMに対し、単一のCLIインターフェースから指示を出し、会話文脈を共有しながら対話を行うためのツールを開発する。

## 目的
ユーザーが複数のLLMを効率的に使い分け、一貫した会話体験を得られるようにする。

## 関連仕様
doc/spec_v0.1.md

## Stories

### Story: REPL機能の実装
- **概要**: ツール起動時にプロンプトを表示し、ユーザー入力を受け付け、処理結果を表示し、再度入力を待つループを実装する。`exit`または`quit`で終了可能とする。
- **Acceptance Criteria**:
    - ツール起動後、`> `プロンプトが表示されること。
    - ユーザーがテキストを入力し、Enterを押すと次の処理に進むこと。
    - 処理後、再度`> `プロンプトが表示されること。
    - `exit`または`quit`入力でツールが終了すること。

### Story: 会話履歴管理機能の実装
- **概要**: セッション中の全てのやり取り（ユーザー発言、Gemini応答、ChatGPT応答）を時系列で保持する「統一会話履歴」リストを実装する。
- **Acceptance Criteria**:
    - ユーザーの発言が履歴に追加されること。
    - Geminiからの応答が履歴に追加されること。
    - ChatGPTからの応答が履歴に追加されること。
    - 履歴が時系列で正しく保持されること。

### Story: メンション機能（ルーティング）の実装
- **概要**: ユーザー入力の先頭文字列（`@gemini`, `@chatgpt`, `@all`, メンションなし）に応じて、適切なLLMへのルーティングまたは履歴追加のみを行う機能を実装する。
- **Acceptance Criteria**:
    - `@gemini`で始まる入力がGemini APIにルーティングされること。
    - `@chatgpt`で始まる入力がChatGPT APIにルーティングされること。
    - `@all`で始まる入力が両方のAPIにルーティングされること。
    - メンションなしの入力がAPIを呼び出さずに履歴に追加されること。

### Story: API連携（Gemini, ChatGPT）の実装
- **概要**: `google-generativeai`と`openai`ライブラリを使用して、それぞれのLLM APIとの連携機能を実装する。
- **Acceptance Criteria**:
    - Gemini APIへのリクエスト送信と応答の受信ができること。
    - ChatGPT APIへのリクエスト送信と応答の受信ができること。
    - 統一会話履歴を各APIの入力フォーマットに合わせて変換できること。

### Story: 環境変数からのAPIキー読み込み
- **概要**: OpenAIおよびGoogle AIのAPIキーを環境変数または`.env`ファイルから安全に読み込む機能を実装する。
- **Acceptance Criteria**:
    - `OPENAI_API_KEY`および`GOOGLE_API_KEY`環境変数を読み込めること。
    - `.env`ファイルに設定されたAPIキーを読み込めること。
    - APIキーが設定されていない場合に適切なエラーハンドリングが行われること。
