# チャット履歴クリア（リセット）機能 仕様書

## 1. 概要

ユーザーが現在のチャット履歴を簡単にクリアし、新しい会話を開始できるようにする機能。WebUIにはボタン、CLIにはコマンドを提供する。

## 2. 背景

- **会話のリフレッシュ**: 話題を変えたい時や、LLMとの会話が意図しない方向に進んでしまった場合に、手軽にコンテキストをリセットできる手段を提供する。
- **コンテキスト過多の回避**: 長い会話履歴がLLMの応答品質を低下させたり、トークンコストを増加させたりするのを防ぐ。
- **ユーザー体験の向上**: 会話のコントロールをユーザーに与え、より快適な対話環境を提供する。

## 3. 機能要件

- **履歴のクリア**: 現在のチャット履歴（ユーザーとLLMのやり取り）を完全に削除する。
- **設定の維持**: LLMプロバイダー、モデル、システムプロンプトなどの設定はクリアされず、維持されること。
- **即時性**: クリア操作は即座に反映され、新しい会話を開始できる状態になること。

## 4. UI仕様 (Gradio)

### 4.1. コンポーネント

1.  **「新しいチャット」ボタン (`gr.Button`)**
    - **ラベル**: "新しいチャット" または "リセット"
    - **配置**: チャットインターフェースの視認性の高い場所（例: サイドバー上部、チャット入力エリアの近く）。

### 4.2. 動作イメージ

- ユーザーがボタンをクリックすると、チャット履歴表示エリアがクリアされ、内部で保持されている会話履歴データもリセットされる。
- モデル選択やシステムプロンプトなどの設定は変更されない。

## 5. CLI仕様 (REPL)

### 5.1. コマンド

1.  **リセットコマンド: `/reset`**
    - **書式**: `/reset`
    - **説明**: 現在のチャット履歴をクリアする。
    - **例**:
      ```
      > /reset
      Chat history cleared.
      ```

### 5.2. 動作イメージ

- ユーザーがREPLで `/reset` と入力すると、内部で保持されている会話履歴データがリセットされる。
- モデル選択やシステムプロンプトなどの設定は変更されない。
