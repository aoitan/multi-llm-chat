# LLM応答コピー機能 仕様書

## 1. 概要

LLMが生成した応答メッセージのテキスト内容を、ユーザーが簡単にクリップボードにコピーできるようにする機能。WebUIには各応答の横にボタンを、CLIにはコマンドを提供する。

## 2. 背景

- **利便性の向上**: LLMが生成したコードスニペット、文章、アイデアなどを他のアプリケーションやドキュメントに転用する際、手動での選択・コピーの手間を省き、ユーザーの作業効率を大幅に向上させる。
- **ユーザー体験の改善**: 「小さな巨人」のような機能であり、実装コストが低いにも関わらず、ユーザーの満足度に直結する。

## 3. 機能要件

- **応答のコピー**: LLMの各応答メッセージのテキスト内容をクリップボードにコピーできること。
- **簡単な操作**: 直感的で分かりやすい操作でコピーを実行できること。
- **設定の維持**: コピー操作はチャット履歴やその他の設定に影響を与えないこと。

## 4. UI仕様 (Gradio)

### 4.1. コンポーネント

1.  **「コピー」ボタン (`gr.Button` またはカスタムHTML/JS)**
    - **ラベル**: "コピー" (またはアイコン)
    - **配置**: 各LLM応答メッセージの表示エリアの横（例: 右上隅）。

### 4.2. 動作イメージ

- ユーザーがLLM応答メッセージの横に表示される「コピー」ボタンをクリックすると、そのメッセージのテキスト内容がクリップボードにコピーされる。
- コピーが成功したことを示す短いフィードバック（例: 「コピーしました！」という一時的な表示）があると、ユーザー体験が向上する。

## 5. CLI仕様 (REPL)

### 5.1. コマンド

1.  **コピーコマンド: `/copy`**
    - **書式**: `/copy <message_index>`
    - **説明**: 指定したインデックスのLLM応答メッセージをクリップボードにコピーする。
      - `message_index` は、最新のLLM応答を `0` とし、それ以前の応答を `1`, `2`... と指定する（または、チャット履歴表示時に各メッセージに振られる番号）。
    - **例**:
      ```
      > /copy 0
      Latest LLM response copied to clipboard.
      > /copy 2
      Message at index 2 copied to clipboard.
      ```

### 5.2. 動作イメージ

- ユーザーが `/copy` コマンドとメッセージインデックスを入力すると、対応するLLM応答のテキストがクリップボードにコピーされる。
- コピーが成功したことを示すメッセージがREPLに表示される。
