# 開発ワークフロー

このプロジェクトでは、PRを小さく保ち、レビューしやすくするために、階層的なタスク管理と親子ブランチ戦略を組み合わせた開発ワークフローを採用します。

## 1. タスク階層

開発タスクは、以下の3つの階層で管理します。

- **エピック (Epic):** 大きな機能やテーマを表します。
- **ストーリー (Story):** エピックを構成する、ユーザー価値のある小さな単位です。
- **タスク (Task):** ストーリーを達成するために必要な、具体的な開発作業です。

## 2. タスク管理

タスク管理は `issues` ディレクトリ内の Markdown ファイル（タスク票）で行います。

### 2.1. ディレクトリ構造によるステータス管理

タスクの進捗状況は、タスク票が配置されているディレクトリによって示します。

- `issues/`: **未完了**のタスク票を配置します。
- `issues/done/`: **完了**したタスク票を配置します。

作業が完了したタスク票は、`issues/done/` ディレクトリに移動してください。

### 2.2. ファイル名による階層表現

タスク票のファイル名は、そのタスクの階層と識別子がわかるように、以下の規則で命名します。

- **エピック:** `epic-[epic_id]-[short_description].md`
- **ストーリー:** `story-[epic_id]-[story_id]-[short_description].md`
- **タスク:** `task-[epic_id]-[story_id]-[task_id]-[short_description].md`

**例:**
- `epic-003-core-refactor.md`
- `story-003-a-prompt-template.md`
- `task-003-a-1-implement-jinja2.md`

`[epic_id]` は `issues` ディレクトリ内で一意な番号、`[story_id]` はエピック内で一意な英文字、`[task_id]` はストーリー内で一意な番号を表します。

## 3. ブランチ戦略

ブランチは、タスク階層を反映した親子関係を持ちます。

- **`main`:** プロダクションコード。常にデプロイ可能な状態を保ちます。
- **`epic/{epic_id}-{description}`:** `main` ブランチから作成します。
- **`story/{epic_id}-{story_id}-{description}`:** 対応する `epic/...` ブランチから作成します。
- **`task/{epic_id}-{story_id}-{task_id}-{description}`:** 対応する `story/...` ブランチから作成します。

## 4. プルリクエスト (PR) の流れ

PRは、階層の下から上へとマージしていきます。これにより、PRは常に小さく、レビューしやすくなります。

1.  `task/...` ブランチ → `story/...` ブランチ
2.  `story/...` ブランチ → `epic/...` ブランチ
3.  `epic/...` ブランチ → `main` ブランチ

`main` ブランチへのマージは、エピックが完了したタイミングで行います。
